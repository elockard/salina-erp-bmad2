src/app/(dashboard)/sales/page.tsx:44:9 lint/correctness/noUnusedVariables  FIXABLE  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! This variable router is unused.
  
    43 â”‚ export default function SalesHistoryPage() {
  > 44 â”‚   const router = useRouter();
       â”‚         ^^^^^^
    45 â”‚ 
    46 â”‚   // Filter state
  
  i Unused variables are often the result of an incomplete refactoring, typos, or other sources of bugs.
  
  i Unsafe fix: If this is intentional, prepend router with an underscore.
  
     42  42 â”‚   
     43  43 â”‚   export default function SalesHistoryPage() {
     44     â”‚ - Â·Â·constÂ·routerÂ·=Â·useRouter();
         44 â”‚ + Â·Â·constÂ·_routerÂ·=Â·useRouter();
     45  45 â”‚   
     46  46 â”‚     // Filter state
  

src/app/(dashboard)/sales/page.tsx:52:10 lint/correctness/noUnusedVariables  FIXABLE  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! This variable currentPage is unused.
  
    50 â”‚   const [salesData, setSalesData] = React.useState<PaginatedSales | null>(null);
    51 â”‚   const [statsData, setStatsData] = React.useState<SalesStats | null>(null);
  > 52 â”‚   const [currentPage, setCurrentPage] = React.useState(1);
       â”‚          ^^^^^^^^^^^
    53 â”‚ 
    54 â”‚   // Loading states
  
  i Unused variables are often the result of an incomplete refactoring, typos, or other sources of bugs.
  
  i Unsafe fix: If this is intentional, prepend currentPage with an underscore.
  
     50  50 â”‚     const [salesData, setSalesData] = React.useState<PaginatedSales | null>(null);
     51  51 â”‚     const [statsData, setStatsData] = React.useState<SalesStats | null>(null);
     52     â”‚ - Â·Â·constÂ·[currentPage,Â·setCurrentPage]Â·=Â·React.useState(1);
         52 â”‚ + Â·Â·constÂ·[_currentPage,Â·setCurrentPage]Â·=Â·React.useState(1);
     53  53 â”‚   
     54  54 â”‚     // Loading states
  

src/app/api/webhooks/clerk/route.ts:179:33 lint/suspicious/noExplicitAny â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! Unexpected any. Specify a different type.
  
    177 â”‚         email: email,
    178 â”‚         tenant_id: tenant_id,
  > 179 â”‚         role: (metadata.role as any) || "owner", // Default to owner for first user
        â”‚                                 ^^^
    180 â”‚         is_active: true,
    181 â”‚       });
  
  i any disables many type checking rules. Its use should be avoided.
  

src/db/index.ts:6:23 lint/style/noNonNullAssertion â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! Forbidden non-null assertion.
  
    5 â”‚ // Admin connection for migrations, Studio, and non-RLS queries (tenant lookup)
  > 6 â”‚ const adminSql = neon(process.env.DATABASE_URL!);
      â”‚                       ^^^^^^^^^^^^^^^^^^^^^^^^^
    7 â”‚ export const adminDb = drizzle(adminSql, { schema });
    8 â”‚ 
  

src/db/index.ts:10:22 lint/style/noNonNullAssertion â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! Forbidden non-null assertion.
  
     9 â”‚ // Authenticated connection for app queries with RLS enforcement
  > 10 â”‚ const authSql = neon(process.env.DATABASE_AUTHENTICATED_URL!);
       â”‚                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    11 â”‚ export const db = drizzle(authSql, { schema });
    12 â”‚ 
  

src/db/index.ts:19:20 lint/style/noNonNullAssertion â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! Forbidden non-null assertion.
  
    17 â”‚  */
    18 â”‚ export function getAuthenticatedDb(authToken: string) {
  > 19 â”‚   const sql = neon(process.env.DATABASE_AUTHENTICATED_URL!, {
       â”‚                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    20 â”‚     authToken, // Pass JWT to enable auth.user_id() in RLS policies
    21 â”‚   });
  

src/modules/authors/components/author-detail.tsx:45:8 lint/correctness/noUnusedImports  FIXABLE  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! This import is unused.
  
    43 â”‚   SelectValue,
    44 â”‚ } from "@/components/ui/select";
  > 45 â”‚ import { Separator } from "@/components/ui/separator";
       â”‚        ^^^^^^^^^^^^^
    46 â”‚ import { Skeleton } from "@/components/ui/skeleton";
    47 â”‚ import { Textarea } from "@/components/ui/textarea";
  
  i Unused imports might be the result of an incomplete refactoring.
  
  i Unsafe fix: Remove the unused imports.
  
     43  43 â”‚     SelectValue,
     44  44 â”‚   } from "@/components/ui/select";
     45     â”‚ - importÂ·{Â·SeparatorÂ·}Â·fromÂ·"@/components/ui/separator";
     46  45 â”‚   import { Skeleton } from "@/components/ui/skeleton";
     47  46 â”‚   import { Textarea } from "@/components/ui/textarea";
  

src/modules/authors/components/author-detail.tsx:46:8 lint/correctness/noUnusedImports  FIXABLE  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! This import is unused.
  
    44 â”‚ } from "@/components/ui/select";
    45 â”‚ import { Separator } from "@/components/ui/separator";
  > 46 â”‚ import { Skeleton } from "@/components/ui/skeleton";
       â”‚        ^^^^^^^^^^^^
    47 â”‚ import { Textarea } from "@/components/ui/textarea";
    48 â”‚ import {
  
  i Unused imports might be the result of an incomplete refactoring.
  
  i Unsafe fix: Remove the unused imports.
  
     44  44 â”‚   } from "@/components/ui/select";
     45  45 â”‚   import { Separator } from "@/components/ui/separator";
     46     â”‚ - importÂ·{Â·SkeletonÂ·}Â·fromÂ·"@/components/ui/skeleton";
     47  46 â”‚   import { Textarea } from "@/components/ui/textarea";
     48  47 â”‚   import {
  

src/modules/authors/components/author-detail.tsx:70:23 lint/correctness/noUnusedImports  FIXABLE  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! Several of these imports are unused.
  
    68 â”‚ } from "../actions";
    69 â”‚ import { type UpdateAuthorInput, updateAuthorSchema } from "../schema";
  > 70 â”‚ import type { Author, AuthorWithPortalStatus, PaymentMethod } from "../types";
       â”‚                       ^^^^^^^^^^^^^^^^^^^^^^
    71 â”‚ 
    72 â”‚ interface AuthorDetailProps {
  
  i Unused imports might be the result of an incomplete refactoring.
  
  i Unsafe fix: Remove the unused imports.
  
    70 â”‚ importÂ·typeÂ·{Â·Author,Â·AuthorWithPortalStatus,Â·PaymentMethodÂ·}Â·fromÂ·"../types";
       â”‚                       ------------------------                                

src/modules/authors/components/authors-split-view.tsx:144:8 lint/complexity/useOptionalChain  FIXABLE  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! Change to an optional chain.
  
    142 â”‚     return (
    143 â”‚       author.name.toLowerCase().includes(query) ||
  > 144 â”‚       (author.email && author.email.toLowerCase().includes(query))
        â”‚        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    145 â”‚     );
    146 â”‚   });
  
  i Unsafe fix: Change to an optional chain.
  
    142 142 â”‚       return (
    143 143 â”‚         author.name.toLowerCase().includes(query) ||
    144     â”‚ - Â·Â·Â·Â·Â·Â·(author.emailÂ·&&Â·author.email.toLowerCase().includes(query))
        144 â”‚ + Â·Â·Â·Â·Â·Â·(author.email?.toLowerCase().includes(query))
    145 145 â”‚       );
    146 146 â”‚     });
  

src/modules/authors/queries.ts:27:7 lint/style/noNonNullAssertion â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! Forbidden non-null assertion.
  
    25 â”‚     const searchTerm = `%${filters.searchQuery}%`;
    26 â”‚     conditions.push(
  > 27 â”‚       or(ilike(authors.name, searchTerm), ilike(authors.email, searchTerm))!,
       â”‚       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    28 â”‚     );
    29 â”‚   }
  

tests/unit/sales-schema.test.ts:387:15 lint/correctness/noUnusedVariables â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! This variable title_id is unused.
  
    385 â”‚   describe("invalid inputs", () => {
    386 â”‚     it("rejects missing title_id", () => {
  > 387 â”‚       const { title_id, ...inputWithoutTitleId } = validSaleInput;
        â”‚               ^^^^^^^^
    388 â”‚       const result = createSaleSchema.safeParse(inputWithoutTitleId);
    389 â”‚       expect(result.success).toBe(false);
  
  i Unused variables are often the result of an incomplete refactoring, typos, or other sources of bugs.
  
  i You can use the ignoreRestSiblings option to ignore unused variables in an object destructuring with a spread.
  

tests/unit/sales-schema.test.ts:401:15 lint/correctness/noUnusedVariables â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! This variable format is unused.
  
    400 â”‚     it("rejects missing format", () => {
  > 401 â”‚       const { format, ...inputWithoutFormat } = validSaleInput;
        â”‚               ^^^^^^
    402 â”‚       const result = createSaleSchema.safeParse(inputWithoutFormat);
    403 â”‚       expect(result.success).toBe(false);
  
  i Unused variables are often the result of an incomplete refactoring, typos, or other sources of bugs.
  
  i You can use the ignoreRestSiblings option to ignore unused variables in an object destructuring with a spread.
  

tests/unit/sales-schema.test.ts:479:15 lint/correctness/noUnusedVariables â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ! This variable sale_date is unused.
  
    478 â”‚     it("rejects missing sale_date", () => {
  > 479 â”‚       const { sale_date, ...inputWithoutDate } = validSaleInput;
        â”‚               ^^^^^^^^^
    480 â”‚       const result = createSaleSchema.safeParse(inputWithoutDate);
    481 â”‚       expect(result.success).toBe(false);
  
  i Unused variables are often the result of an incomplete refactoring, typos, or other sources of bugs.
  
  i You can use the ignoreRestSiblings option to ignore unused variables in an object destructuring with a spread.
  

src/lib/encryption.ts format â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Ã— Formatter would have printed the following content:
  
     28  28 â”‚     if (!keyHex) {
     29  29 â”‚       throw new Error(
     30     â”‚ - Â·Â·Â·Â·Â·Â·"ENCRYPTION_KEYÂ·environmentÂ·variableÂ·isÂ·notÂ·set.Â·GenerateÂ·with:Â·opensslÂ·randÂ·-hexÂ·32"
         30 â”‚ + Â·Â·Â·Â·Â·Â·"ENCRYPTION_KEYÂ·environmentÂ·variableÂ·isÂ·notÂ·set.Â·GenerateÂ·with:Â·opensslÂ·randÂ·-hexÂ·32",
     31  31 â”‚       );
     32  32 â”‚     }
    Â·Â·Â·Â·Â·Â·Â· â”‚ 
     34  34 â”‚     if (keyHex.length !== 64) {
     35  35 â”‚       throw new Error(
     36     â”‚ - Â·Â·Â·Â·Â·Â·"ENCRYPTION_KEYÂ·mustÂ·beÂ·64Â·hexÂ·charactersÂ·(32Â·bytes).Â·GenerateÂ·with:Â·opensslÂ·randÂ·-hexÂ·32"
         36 â”‚ + Â·Â·Â·Â·Â·Â·"ENCRYPTION_KEYÂ·mustÂ·beÂ·64Â·hexÂ·charactersÂ·(32Â·bytes).Â·GenerateÂ·with:Â·opensslÂ·randÂ·-hexÂ·32",
     37  37 â”‚       );
     38  38 â”‚     }
  

src/modules/authors/components/author-detail.tsx:136:3 lint/correctness/useExhaustiveDependencies  FIXABLE  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Ã— This hook specifies more dependencies than necessary: author.id
  
    135 â”‚   // Fetch masked tax ID when author changes
  > 136 â”‚   useEffect(() => {
        â”‚   ^^^^^^^^^
    137 â”‚     if (author.tax_id && canViewTaxId) {
    138 â”‚       getMaskedTaxIdAction(author.tax_id).then(setMaskedTaxId);
  
  i This dependency can be removed from the list.
  
    140 â”‚       setMaskedTaxId("");
    141 â”‚     }
  > 142 â”‚   }, [author.id, author.tax_id, canViewTaxId]);
        â”‚       ^^^^^^^^^
    143 â”‚ 
    144 â”‚   const form = useForm<UpdateAuthorInput>({
  
  i Unsafe fix: Remove the extra dependencies from the list.
  
    142 â”‚ Â·Â·},Â·[author.id,Â·author.tax_id,Â·canViewTaxId]);
        â”‚       -----------                              

src/modules/authors/components/author-list.tsx:121:15 lint/a11y/noNoninteractiveElementToInteractiveRole  FIXABLE  â”â”â”â”â”â”â”â”â”â”â”

  Ã— The HTML element ul is non-interactive and should not have an interactive role.
  
    119 â”‚       {!loading && authors.length > 0 && (
    120 â”‚         <div className="flex-1 overflow-y-auto">
  > 121 â”‚           <ul role="listbox" aria-label="Authors">
        â”‚               ^^^^^^^^^^^^^^
    122 â”‚             {authors.map((author) => (
    123 â”‚               <li key={author.id}>
  
  i Replace ul with a div or a span.
  
  i Unsafe fix: Remove the role attribute.
  
    121 â”‚ Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·<ulÂ·role="listbox"Â·aria-label="Authors">
        â”‚               ---------------                     

src/modules/authors/components/author-list.tsx:145:25 lint/a11y/useAriaPropsSupportedByRole â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Ã— The ARIA attribute 'aria-label' is not supported by this element.
  
    143 â”‚                       {/* AC 32: Portal icon for authors with active portal access */}
    144 â”‚                       {author.portal_user_id && (
  > 145 â”‚                         <span
        â”‚                         ^^^^^
  > 146 â”‚                           className="text-xs"
  > 147 â”‚                           title="Has portal access"
  > 148 â”‚                           aria-label="Has portal access"
  > 149 â”‚                         >
        â”‚                         ^
    150 â”‚                           ğŸ”‘
    151 â”‚                         </span>
  
  i Ensure that ARIA attributes are valid for the role of the element.
  

src/modules/authors/components/authors-split-view.tsx:57:3 lint/correctness/useExhaustiveDependencies  FIXABLE  â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Ã— This hook specifies more dependencies than necessary: showInactive
  
    56 â”‚   // Reload when showInactive changes
  > 57 â”‚   useEffect(() => {
       â”‚   ^^^^^^^^^
    58 â”‚     reloadAuthors();
    59 â”‚   }, [showInactive, reloadAuthors]);
  
  i This dependency can be removed from the list.
  
    57 â”‚   useEffect(() => {
    58 â”‚     reloadAuthors();
  > 59 â”‚   }, [showInactive, reloadAuthors]);
       â”‚       ^^^^^^^^^^^^
    60 â”‚ 
    61 â”‚   // Story 2.3: Load portal user info when selected author changes
  
  i Unsafe fix: Remove the extra dependencies from the list.
  
    59 â”‚ Â·Â·},Â·[showInactive,Â·reloadAuthors]);
       â”‚       --------------                

src/modules/isbn/components/isbn-detail-modal.tsx:249:15 lint/a11y/noLabelWithoutControl â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Ã— A form label must be associated with an input.
  
    247 â”‚             {/* ISBN-13 with copy button */}
    248 â”‚             <div className="space-y-2">
  > 249 â”‚               <label className="text-sm font-medium text-muted-foreground">
        â”‚               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  > 250 â”‚                 ISBN-13
  > 251 â”‚               </label>
        â”‚               ^^^^^^^^
    252 â”‚               <div className="flex items-center gap-2">
    253 â”‚                 <code className="flex-1 rounded-md bg-muted px-3 py-2 font-mono text-lg">
  
  i Consider adding a `for` or `htmlFor` attribute to the label element or moving the input element to inside the label element.
  

The number of diagnostics exceeds the limit allowed. Use --max-diagnostics to increase it.
Diagnostics not shown: 118.
Checked 183 files in 96ms. No fixes applied.
Found 32 errors.
Found 101 warnings.
Found 5 infos.
check â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Ã— Some errors were emitted while running checks.
  

